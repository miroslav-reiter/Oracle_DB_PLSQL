
## ‚öôÔ∏è Z√°klady spr√°vy datab√°zov√Ωch objektov

T√°to kapitola popisuje z√°kladn√© oper√°cie so ≈°trukt√∫rou datab√°zy ‚Äì tvorbu tabuliek, vkladanie, aktualiz√°ciu a mazanie √∫dajov.

---

### üß± Tvorba tabuliek

```sql
CREATE TABLE zakaznici (
  id NUMBER PRIMARY KEY,
  meno VARCHAR2(50),
  mesto VARCHAR2(50),
  registracia DATE
);
```

- Pr√≠kaz `CREATE TABLE` definuje ≈°trukt√∫ru novej tabuƒæky.
- `PRIMARY KEY` zabezpeƒçuje jedineƒçn√© a nepr√°zdne hodnoty v stƒ∫pci `id`.

---

### üî† D√°tov√© typy v Oracle

| Typ         | Popis                                                          | Pr√≠klad                         |
|--------------|----------------------------------------------------------------|----------------------------------|
| `NUMBER`     | ƒå√≠seln√° hodnota, cel√© ƒç√≠sla aj desatinn√©                      | `NUMBER(10,2)`                   |
| `VARCHAR2`   | Premenn√° dƒ∫≈æka textov√©ho re≈•azca                              | `VARCHAR2(100)`                  |
| `CHAR`       | Pevn√° dƒ∫≈æka textu                                             | `CHAR(10)`                       |
| `CLOB`       | Veƒæk√© textov√© d√°ta                                            | `CLOB`                           |
| `BLOB`       | Bin√°rne veƒæk√© objekty (napr. obr√°zky, PDF)                    | `BLOB`                           |
| `DATE`       | D√°tum a ƒças (bez ƒçasov√©ho p√°sma)                              | `DATE`                           |
| `TIMESTAMP`  | D√°tum s ƒçasom, presnos≈• na sekundy a≈æ nanosekundy             | `TIMESTAMP(6)`                   |
| `TIMESTAMP WITH TIME ZONE` | D√°tum a ƒças s ƒçasov√Ωm p√°smom                   | `TIMESTAMP WITH TIME ZONE`       |
| `TIMESTAMP WITH LOCAL TIME ZONE` | D√°tum s lok√°lnym ƒçasom (podƒæa session) | `TIMESTAMP WITH LOCAL TIME ZONE` |
| `INTERVAL YEAR TO MONTH` | Rozsah rokov a mesiacov                          | `INTERVAL '2-6' YEAR TO MONTH`   |
| `INTERVAL DAY TO SECOND` | Rozsah dn√≠ a sek√∫nd                               | `INTERVAL '5 12:00:00' DAY TO SECOND` |
| `RAW`        | Dvojkov√Ω form√°tovan√Ω re≈•azec                                  | `RAW(16)`                         |
| `LONG`       | Dlh√Ω text (neodpor√∫ƒça sa ‚Äì nahraden√Ω CLOB)                    | `LONG`                           |
| `FLOAT`      | Re√°lne ƒç√≠slo (s pl√°vaj√∫cou desatinnou ƒçiarkou)                | `FLOAT(126)`                     |
| `BINARY_FLOAT` | IEEE 754 bin√°rne ƒç√≠slo (v√Ωkonnej≈°ie v√Ωpoƒçty)              | `BINARY_FLOAT`                   |
| `BINARY_DOUBLE`| IEEE 754 double precision ƒç√≠slo                            | `BINARY_DOUBLE`                  |

---

### ‚ûï Vkladanie d√°t (INSERT)

#### Jednoduch√© vlo≈æenie:

```sql
INSERT INTO zakaznici (id, meno, mesto) 
VALUES (1, 'J√°n', 'Bratislava');
```

- Vlo≈æ√≠ jeden nov√Ω riadok so zadan√Ωmi hodnotami.

---

#### Viacn√°sobn√© vlo≈æenie:

```sql
INSERT ALL
  INTO zakaznici (id, meno) VALUES (2, 'Eva')
  INTO zakaznici (id, meno) VALUES (3, 'Marek')
SELECT * FROM dual;
```

- Efekt√≠vny sp√¥sob vkladania viacer√Ωch riadkov jedn√Ωm pr√≠kazom.

---

#### Vkladanie na z√°klade SELECT:

```sql
INSERT INTO zakaznici_archiv (id, meno, mesto)
SELECT id, meno, mesto
FROM zakaznici
WHERE registracia < TO_DATE('01-01-2020', 'DD-MM-YYYY');
```

- Pou≈æ√≠va sa napr. pri archiv√°cii alebo migr√°cii d√°t.

---

### üîÑ Aktualiz√°cia √∫dajov (UPDATE)

```sql
UPDATE zakaznici 
SET mesto = 'Ko≈°ice', telefon = '0901234567'
WHERE id = 1;
```

- Men√≠ hodnoty vybran√Ωch stƒ∫pcov pre z√°kazn√≠ka s ID 1.
- `WHERE` je d√¥le≈æit√© ‚Äì bez nej by sa aktualizovali v≈°etky riadky.

---

```sql
UPDATE produkty 
SET cena = 749.99 
WHERE nazov = 'Notebook ASUS';
```

- Aktualizuje cenu pre konkr√©tny produkt.

---

### üóëÔ∏è Mazanie √∫dajov a tabuliek

#### DELETE ‚Äì vymazanie vybran√Ωch riadkov:

```sql
DELETE FROM zakaznici 
WHERE mesto = 'Ko≈°ice';
```

- Odstr√°ni len riadky s mestom `Ko≈°ice`.

---

#### TRUNCATE ‚Äì r√Ωchle vymazanie v≈°etk√Ωch √∫dajov:

```sql
TRUNCATE TABLE zakaznici;
```

- R√Ωchle, ale **nevratn√©**. Nie je mo≈æn√© pou≈æi≈• `ROLLBACK`.

---

#### DROP TABLE ‚Äì √∫pln√© odstr√°nenie tabuƒæky:

```sql
DROP TABLE zakaznici;
```

- Odstr√°ni cel√∫ tabuƒæku vr√°tane v≈°etk√Ωch d√°t a defin√≠cie.

---

#### ƒéal≈°ie pr√≠klady:

```sql
DROP TABLE produkty;
DELETE FROM produkty WHERE cena > 1000;
```

- `DELETE` odstr√°ni drah√© produkty, `DROP` zma≈æe cel√∫ tabuƒæku.

---



### üéÅ Bonusov√© pr√≠klady

#### üîê Vytvorenie tabuƒæky s predvolenou hodnotou

```sql
CREATE TABLE registracia (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY,
  meno VARCHAR2(50),
  aktivny CHAR(1) DEFAULT 'Y'
);
```

‚û°Ô∏è Stƒ∫pec `aktivny` bude ma≈• predvolen√∫ hodnotu `'Y'`, ak sa neuvedie.

---

#### üìÜ V√Ωber d√°tumu registr√°cie za posledn√Ωch 30 dn√≠

```sql
SELECT * FROM zakaznici
WHERE registracia >= SYSDATE - 30;
```

‚û°Ô∏è Vyberie z√°znamy z posledn√Ωch 30 dn√≠.

---

#### üßÆ Zv√Ω≈°enie cien produktov o 10 %

```sql
UPDATE produkty
SET cena = cena * 1.10;
```

‚û°Ô∏è Aplikuje zv√Ω≈°enie ceny o 10 % na v≈°etky produkty.

---

#### üßπ Vymazanie v≈°etk√Ωch neakt√≠vnych z√°kazn√≠kov

```sql
DELETE FROM zakaznici
WHERE aktivny = 'N';
```

‚û°Ô∏è Odstr√°ni neakt√≠vnych z√°kazn√≠kov na z√°klade logickej hodnoty.

---
