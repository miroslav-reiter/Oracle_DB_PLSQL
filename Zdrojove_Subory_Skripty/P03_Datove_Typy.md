
# üìò P03 ‚Äì D√°tov√© typy a funkcie v Oracle

Prehƒæad z√°kladn√Ωch d√°tov√Ωch typov v Oracle datab√°ze a najpou≈æ√≠vanej≈°√≠ch funkci√≠ s pr√≠kladmi pou≈æitia.

---

## üóÉÔ∏è Prehƒæad d√°tov√Ωch typov v Oracle

| D√°tov√Ω typ       | Popis                                              | Pr√≠klad pou≈æitia              |
|------------------|----------------------------------------------------|-------------------------------|
| `VARCHAR2(n)`    | Premenn√Ω text do max. dƒ∫≈æky `n` znakov             | meno VARCHAR2(50)            |
| `CHAR(n)`        | Pevne dlh√Ω text s presne `n` znakmi                | kod CHAR(3)                   |
| `NUMBER(p,s)`    | ƒå√≠slo s presnos≈•ou `p` a mierkou `s`               | cena NUMBER(10,2)            |
| `DATE`           | D√°tum a ƒças (bez ƒçasov√©ho p√°sma)                  | datum_narodenia DATE         |
| `TIMESTAMP`      | Presn√Ω d√°tum a ƒças s milisekundami                 | odoslane TIMESTAMP           |
| `CLOB`           | Veƒæk√Ω textov√Ω objekt (napr. ƒçl√°nky, pozn√°mky)      | poznamka CLOB                |
| `BLOB`           | Bin√°rne d√°ta (napr. obr√°zky, s√∫bory)               | obrazok BLOB                 |
| `BOOLEAN`*       | True/False ‚Äì dostupn√© len v PL/SQL                 | vlajka BOOLEAN               |

> üß† *Pozn√°mka:* BOOLEAN nie je podporovan√Ω v SQL tabuƒæk√°ch ‚Äì iba v PL/SQL blokoch a proced√∫rach.

---

## üìå Pr√≠klady vytv√°rania stƒ∫pcov

```sql
CREATE TABLE produkty (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nazov VARCHAR2(100),
    cena NUMBER(10, 2),
    datum_pridania DATE,
    popis CLOB
);
```

‚û°Ô∏è Vytvor√≠ tabuƒæku s r√¥znymi d√°tov√Ωmi typmi pre text, ƒç√≠sla, d√°tumy a veƒæk√Ω text.

---

## üßÆ ƒå√≠seln√© funkcie

```sql
SELECT
    ABS(-15) AS "Absol√∫tna hodnota",
    CEIL(3.14) AS "Zaokr. hore",
    FLOOR(3.14) AS "Zaokr. dolu",
    ROUND(3.567, 2) AS "Zaokr√∫hlen√©",
    MOD(10, 3) AS "Zvy≈°ok po delen√≠"
FROM dual;
```

‚û°Ô∏è Funkcie na pr√°cu s ƒç√≠slami: absol√∫tna hodnota, zaokr√∫hƒæovanie, modulo.

---

## üìÜ D√°tumov√© funkcie

```sql
SELECT
    SYSDATE AS "Aktu√°lny d√°tum",
    CURRENT_DATE AS "D√°tum v SESSION",
    ADD_MONTHS(SYSDATE, 2) AS "O 2 mesiace nesk√¥r",
    MONTHS_BETWEEN(SYSDATE, TO_DATE('2025-01-01','YYYY-MM-DD')) AS "Rozdiel mesiacov",
    NEXT_DAY(SYSDATE, 'FRIDAY') AS "Najbli≈æ≈°√≠ piatok"
FROM dual;
```

‚û°Ô∏è Funkcie na z√≠skanie aktu√°lneho d√°tumu, v√Ωpoƒçet rozdielov, pridanie mesiacov atƒè.

---

## üî§ Re≈•azcov√© funkcie

```sql
SELECT
    UPPER('oracle') AS "Veƒæk√© p√≠smen√°",
    LOWER('ORACLE') AS "Mal√© p√≠smen√°",
    INITCAP('vitajte v oracle') AS "Prv√© veƒæk√©",
    LENGTH('oracle') AS "Dƒ∫≈æka",
    SUBSTR('oracle', 2, 3) AS "ƒåas≈• re≈•azca"
FROM dual;
```

‚û°Ô∏è Z√°kladn√© funkcie pre pr√°cu s textom: veƒækos≈• p√≠smen, v√Ωber ƒçasti textu, dƒ∫≈æka re≈•azca.

---

## üîé Logick√© podmienky (CASE, NVL, DECODE)

```sql
SELECT
    meno,
    plat,
    CASE 
        WHEN plat > 2000 THEN 'Senior'
        WHEN plat > 1000 THEN 'Mid'
        ELSE 'Junior'
    END AS "√örove≈à"
FROM zamestnanci;
```

‚û°Ô∏è Pr√≠kaz `CASE` umo≈æ≈àuje vytv√°ra≈• podmienen√© logiky priamo v SELECT.

```sql
SELECT NVL(telefon, 'Neuveden√©') AS "Telef√≥n"
FROM zakaznici;
```

‚û°Ô∏è `NVL` nahr√°dza NULL hodnoty predvolenou.

```sql
SELECT DECODE(pohlavie, 'M', 'Mu≈æ', '≈Ωena') AS "Pohlavie"
FROM osoby;
```

‚û°Ô∏è `DECODE` je Oracle ≈°pecifick√° verzia `CASE` (jednoduch≈°ia forma).



---

## üìä Agregaƒçn√© funkcie

```sql
SELECT
    COUNT(*) AS "Poƒçet riadkov",
    SUM(plat) AS "S√∫ƒçet platov",
    AVG(plat) AS "Priemern√Ω plat",
    MIN(plat) AS "Najni≈æ≈°√≠ plat",
    MAX(plat) AS "Najvy≈°≈°√≠ plat"
FROM zamestnanci;
```

‚û°Ô∏è Pou≈æ√≠vaj√∫ sa na v√Ωpoƒçet s√∫hrnn√Ωch hodn√¥t z viacer√Ωch riadkov.

---

## üîÅ Konverzn√© funkcie

```sql
SELECT
    TO_CHAR(SYSDATE, 'DD.MM.YYYY') AS "Form√°tovan√Ω d√°tum",
    TO_DATE('2025-12-24', 'YYYY-MM-DD') AS "D√°tum z textu",
    TO_NUMBER('12345') AS "ƒå√≠slo z textu"
FROM dual;
```

‚û°Ô∏è Funkcie na prevod medzi d√°tumom, textom a ƒç√≠slom.

---

## üß† Analytick√© funkcie (ROWNUM, RANK, DENSE_RANK)

```sql
SELECT meno, plat, 
       RANK() OVER (ORDER BY plat DESC) AS "Poradie"
FROM zamestnanci;
```

‚û°Ô∏è `RANK()` prirad√≠ poradie podƒæa v√Ω≈°ky platu, `DENSE_RANK()` bez preskakovania.

```sql
SELECT * FROM (
    SELECT * FROM zamestnanci WHERE oddelenie = 'IT'
) WHERE ROWNUM <= 5;
```

‚û°Ô∏è `ROWNUM` sl√∫≈æi na obmedzenie poƒçtu v√Ωsledkov (alternat√≠va k `LIMIT`).

---

## üß™ ≈†peci√°lne funkcie

```sql
SELECT
    USER AS "Aktu√°lny pou≈æ√≠vateƒæ",
    SYSDATE AS "D√°tum syst√©mu",
    SYSTIMESTAMP AS "Presn√Ω ƒças",
    UID AS "ID pou≈æ√≠vateƒæa"
FROM dual;
```

‚û°Ô∏è Zobrazuj√∫ inform√°cie o prostred√≠ a pou≈æ√≠vateƒæovi.

---

## üìå CASE verzus DECODE

**CASE:** v≈°eobecn√° podmienka
```sql
SELECT meno,
       CASE 
           WHEN pozicia = 'CEO' THEN 'Vedenie'
           WHEN pozicia = 'IT' THEN 'Technik'
           ELSE 'Ostatn√©'
       END AS oddelenie
FROM zamestnanci;
```

**DECODE:** jednoduch√° podmienka
```sql
SELECT meno,
       DECODE(pozicia, 'CEO', 'Vedenie', 'IT', 'Technik', 'Ostatn√©') AS oddelenie
FROM zamestnanci;
```

‚û°Ô∏è `CASE` je flexibilnej≈°√≠, `DECODE` je krat≈°√≠ a r√Ωchlej≈°√≠ pre jednoduch√© vetvenie.
