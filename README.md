# ☁️ Online kurzy Oracle DB a PL/SQL
Materiály k online kurzom Oracle databázy a PL/SQL s (Oracle Database Express Edition)

### A1 [🎯 Zoznam základných Oracle SQL príkazov s vysvetleniami](#zoznam-zakladnych-oracle-prikazov)
### A2 [🔐 Zoznam DBA príkazov Oracle - Používatelia a Práva](#zoznam-dba-prikazov-pouzivatelia)
### A3 [📥 Inštalácia Oracle DB XE a SQL Developer](#instalacia-oracle)
### A4 [🧱 Oracle databázové objekty](#oracle-objekty)

<a name="zoznam-zakladnych-oracle-prikazov"></a>
## 🎯 Zoznam základných Oracle príkazov s vysvetleniami

**1. 🏗️ CREATE TABLE** – Vytvorenie tabuľky

```sql
CREATE TABLE student (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    meno VARCHAR2(100),
    vek NUMBER
);
```

Tento príkaz vytvorí tabuľku `student` so stĺpcami `id`, `meno` a `vek`.

---

**2. ✏️ INSERT INTO** – Vloženie dát

```sql
INSERT INTO student (meno, vek) VALUES ('Anna', 21);
```

Tento príkaz vloží nový záznam do tabuľky `student` s menom `Anna` a vekom `21`.

---

**3. 🔍 SELECT** – Výber údajov

```sql
SELECT * FROM student;
```

Tento príkaz zobrazí všetky údaje z tabuľky `student`.

---

**4. ✒️ UPDATE** – Aktualizácia údajov

```sql
UPDATE student SET vek = 22 WHERE meno = 'Anna';
```

Tento príkaz aktualizuje vek študentky s menom `Anna` na hodnotu `22`.

---

**5. ❌ DELETE** – Odstránenie údajov

```sql
DELETE FROM student WHERE meno = 'Anna';
```

Tento príkaz odstráni riadok z tabuľky `student`, kde meno je `Anna`.

---

**6. 🧮 Agregačné funkcie** – SUM, AVG, COUNT, MIN, MAX

```sql
SELECT COUNT(*) FROM student;
```

Tento príkaz spočíta počet riadkov v tabuľke `student`.

---

**7. 📊 GROUP BY a HAVING**

```sql
SELECT vek, COUNT(*) FROM student GROUP BY vek HAVING COUNT(*) > 1;
```

Tento príkaz zoskupí študentov podľa veku a zobrazí len tie skupiny, ktoré sa vyskytujú viac ako raz.

---

**8. 🔗 JOIN**

```sql
SELECT s.meno, k.nazov 
FROM student s 
JOIN kurz k ON s.kurz_id = k.id;
```

Tento príkaz spojí tabuľky `student` a `kurz` na základe `kurz_id` a zobrazí zodpovedajúce údaje.

---

<a name="zoznam-dba-prikazov-pouzivatelia"></a>
## 🔐 Zoznam DBA príkazov Oracle – Používatelia a Práva

**1. 👤 CREATE USER**

```sql
CREATE USER test_user IDENTIFIED BY silneheslo;
```

Tento príkaz vytvorí nového používateľa `test_user` s heslom `silneheslo`.

---

**2. 🔑 GRANT PRIVILEGES**

```sql
GRANT CONNECT, RESOURCE TO test_user;
```

Tento príkaz pridelí používateľovi `test_user` základné oprávnenia na pripojenie a prácu s databázou.

---

**3. 🚫 REVOKE PRIVILEGES**

```sql
REVOKE RESOURCE FROM test_user;
```

Tento príkaz odoberie právo `RESOURCE` používateľovi `test_user`.

---

**4. 🧾 CREATE ROLE a GRANT**

```sql
CREATE ROLE analytik;
GRANT SELECT ON student TO analytik;
GRANT analytik TO test_user;
```

Tento príkaz vytvorí rolu `analytik`, pridelí jej práva na tabuľku `student` a priradí rolu používateľovi `test_user`.

---

**5. 🗑️ DROP USER**

```sql
DROP USER test_user CASCADE;
```

Tento príkaz natrvalo odstráni používateľa `test_user` a všetky jeho objekty.

---

<a name="instalacia-oracle"></a>
## 📥 Inštalácia Oracle XE a SQL Developer

### 🧾 Verzie a licencie

- **Oracle Database Express Edition (XE)** – bezplatná verzia databázy, obmedzená na 2 CPU, 2 GB RAM a 12 GB dát.
- **Licencia:** Oracle XE je vhodná pre výučbu, vývoj a malé aplikácie. Je dostupná bezplatne bez potreby registrácie.
- Oracle Database XE je ideálnym nástrojom na výučbu SQL a testovanie aplikácií – zdarma, legálne a ľahko nasaditeľná.

**1. Stiahnutie Oracle XE:**

- [Oracle Database XE Download](https://www.oracle.com/database/technologies/xe-downloads.html)
- [Free Oracle Database for Everyone](https://www.oracle.com/database/technologies/appdev/xe.html)

**2. Inštalácia SQL Developer:**

- [SQL Developer Download](https://www.oracle.com/tools/downloads/sqldev-downloads.html)

**3. Pripojenie k databáze:**

- **Hostname:** `localhost`
- **Port:** `1521`
- **SID/Service name:** `XEPDB1` (pluggable databáza) alebo `xe`
- **Username:** `system` alebo vlastný používateľ
- **Password:** heslo zvolené pri inštalácii

### 💻 Inštalácia na **Windows**

1. **Stiahnutie inštalátora**
   - Navštívte [Oracle XE Downloads](https://www.oracle.com/database/technologies/xe-downloads.html)
   - Stiahnite: *Oracle Database 21c Express Edition for Windows x64*

2. **Inštalácia databázy**
   - Spustite inštalátor ako administrátor
   - Potvrďte licenčné podmienky
   - Zadajte heslo pre používateľa `SYS`, `SYSTEM`
   - Počkajte na dokončenie inštalácie
  
![2025-05-19 21_22_35-Oracle Database 21c Express Edition](https://github.com/user-attachments/assets/e41a243a-7328-475d-92e3-3e3c1ca85819)
![2025-05-19 21_23_05-Oracle Database 21c Express Edition](https://github.com/user-attachments/assets/c65b3dbd-f217-4df6-be27-f98f4b9abeb7)
![2025-05-19 21_23_19-Oracle Database 21c Express Edition](https://github.com/user-attachments/assets/69a969b2-cc8f-49f1-86cf-386509684646)


3. **Overenie inštalácie**
   - Otvorte „Start“ → „Run SQL Command Line“
   - Prihláste sa ako SYSTEM:
     ```sql
     CONNECT system
     ```
   - Skúste jednoduchý dopyt:
     ```sql
     SELECT 'OK' FROM dual;
     ```

4. **Inštalácia SQL Developer**
   - Stiahnite z [SQL Developer Download](https://www.oracle.com/tools/downloads/sqldev-downloads.html)
   - Rozbaľte ZIP súbor a spustite `sqldeveloper.exe`
   - Prihláste sa pomocou:
     - Username: `system`
     - Password: `vaše heslo`
     - Hostname: `localhost`
     - Port: `1521`
     - Service Name: `XEPDB1`

**📁 Destination Folder** `C:\app\miros\product\21c\`  
➡️ Toto je hlavný cieľový adresár, kam sa nainštaluje celý Oracle produkt. Obsahuje všetky súbory databázy, inštalačné skripty, knižnice a pomocné nástroje.

**📁 Oracle Home** `C:\app\miros\product\21c\dbhomeXE\`
➡️ "Oracle Home" predstavuje koreňový adresár pre túto konkrétnu inštanciu databázy. Obsahuje binárky, konfiguračné súbory, skripty, SQL*Plus, listener, služby databázy atď.
➡️ Každá inštancia databázy má svoj vlastný Oracle Home.

**📁 Oracle Base** `C:\app\miros\product\21c\`  
➡️ "Oracle Base" je nadradený adresár pre všetky Oracle produkty. Zvyčajne v ňom bývajú:
- Logy (napr. diag/)
- Nastavenia všetkých databáz
- Spoločné komponenty zdieľané medzi viacerými Oracle Home

---

### 🐧 Inštalácia na **Linux / Ubuntu**

1. **Stiahnutie balíka**
   - Navštívte [Oracle XE Downloads](https://www.oracle.com/database/technologies/xe-downloads.html)
   - Stiahnite: *Oracle Database 21c Express Edition for Linux x64 (RPM)*

2. **Konverzia RPM na DEB**
   - Inštalujte potrebné nástroje:
     ```bash
     sudo apt update
     sudo apt install alien libaio1
     ```
   - Konvertujte balík:
     ```bash
     sudo alien -d oracle-database-xe-21c-1.0-1.x86_64.rpm
     ```

3. **Inštalácia Oracle XE**
   - Spustite inštaláciu:
     ```bash
     sudo dpkg -i oracle-database-xe-21c_1.0-2_amd64.deb
     ```

4. **Inicializácia databázy**
   - Spustite konfiguračný skript:
     ```bash
     sudo /etc/init.d/oracle-xe-21c configure
     ```
   - Zadajte požadované porty a heslo pre SYS/SYSTEM

5. **Inštalácia SQL Developer (voliteľne)**
   - Stiahnite a rozbaľte ZIP balík z [oficiálnej stránky](https://www.oracle.com/tools/downloads/sqldev-downloads.html)
   - Spustite:
     ```bash
     ./sqldeveloper/sqldeveloper.sh
     ```

---
<a name="overenie-instalacie"></a>
## ❗ Overenie a riešenie problémov s inštaláciou Oracle DB XE

Ak sa počas inštalácie objaví hlásenie:

> **"The wizard was interrupted before Oracle Database 21c Express Edition could be completely installed."**

znamená to, že **inštalácia zlyhala** a databáza **nebola nainštalovaná**.

![2025-05-19 21_28_01-Oracle Database 21c Express Edition](https://github.com/user-attachments/assets/2adfee44-3d05-48c9-aac3-a3fc2e24a989)

---

### ✅ Ako zistiť, či je Oracle DB XE nainštalovaná

**1. Skontrolovať služby vo Windows**
- Otvorte `services.msc`
- Skontrolujte, či existujú služby:
  - `OracleXETNSListener`
  - `OracleServiceXE`
- Ak chýbajú, databáza sa nenainštalovala

**2. Skontrolovať priečinok inštalácie**
- Skontrolujte adresár:
  ```
  C:\app\miros\product\21c\dbhomeXE
  ```
- Skontrolujte, či existujú súbory ako:
  - `bin\sqlplus.exe`
  - `network\admin\listener.ora`

**3. Spustiť SQL Command Line**
```cmd
sqlplus /nolog
```
- Ak príkaz nefunguje, inštalácia neprebehla alebo nie je v PATH

---

### 🛠 Odstránenie zvyškov po neúspešnej inštalácii

1. Vymaž tieto priečinky (ak existujú):
   - `C:\app\miros`
   - `C:\Program Files\Oracle`
   - `C:\ProgramData\Oracle`

2. Spusti `regedit` a vymaž (opatrne):
   - `HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE`
   - `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Oracle...`

3. Reštartuj počítač

---

### 🔁 Spustenie inštalácie znova

- Spusť inštalátor ako **správca**
- Vyber jednoduchú cestu, napr.:
  ```
  C:\oracle\product\21c\
  ```
- Uisti sa, že:
  - nemáš spustený antivírus
  - máš aspoň 10 GB voľného miesta
  - systém má nainštalovaný .NET a Visual C++ Redistributable

---

### 🧪 Odporúčaný overovací test po inštalácii

```sql
CONNECT system
SELECT 'Oracle funguje!' AS status FROM dual;
```

Tento príkaz potvrdí úspešnú inštaláciu a funkčnosť SQL*Plus alebo SQL Developer.
---

<a name="oracle-objekty"></a>
## 🧱 Oracle databázové objekty

Prehľad základných databázových objektov v Oracle:

**1. 📋 Tabuľka (TABLE)** – Ukladá štruktúrované údaje v riadkoch a stĺpcoch.

```sql
CREATE TABLE zamestnanci (
    id NUMBER PRIMARY KEY,
    meno VARCHAR2(100),
    pozicia VARCHAR2(50)
);
```

---

**2. 👁️‍🗨️ Pohľad (VIEW)** – Virtuálna tabuľka vytvorená z výsledku SELECT dopytu.

```sql
CREATE VIEW aktivni_zamestnanci AS
SELECT * FROM zamestnanci WHERE pozicia IS NOT NULL;
```

---

**3. 🧠 Funkcia (FUNCTION)** – Uložená procedúra, ktorá vracia hodnotu.

```sql
CREATE OR REPLACE FUNCTION vrat_bonus(p_plat NUMBER) RETURN NUMBER IS
BEGIN
    RETURN p_plat * 0.10;
END;
```

---

**4. 🔁 Procedúra (PROCEDURE)** – Uložená procedúra, ktorá nemusí vracať hodnotu.

```sql
CREATE OR REPLACE PROCEDURE zvys_plat(p_id NUMBER, p_bonus NUMBER) IS
BEGIN
    UPDATE zamestnanci SET plat = plat + p_bonus WHERE id = p_id;
END;
```

---

**5. 📦 Balík (PACKAGE)** – Kolekcia príbuzných procedúr a funkcií.

```sql
CREATE OR REPLACE PACKAGE mzdy_pkg AS
  PROCEDURE vypocitaj_odmenu(p_id NUMBER);
  FUNCTION vrat_priplatok(p_vek NUMBER) RETURN NUMBER;
END mzdy_pkg;
```

---

**6. 🛠️ Trigger (TRIGGER)** – Automatická reakcia na udalosť v databáze.

```sql
CREATE OR REPLACE TRIGGER kontrola_platu
BEFORE INSERT OR UPDATE ON zamestnanci
FOR EACH ROW
BEGIN
    IF :NEW.plat < 800 THEN
        RAISE_APPLICATION_ERROR(-20001, 'Plat je príliš nízky.');
    END IF;
END;
```

---

**7. 📚 Sekvencia (SEQUENCE)** – Generuje číselné hodnoty, často pre ID.

```sql
CREATE SEQUENCE seq_zamestnanci START WITH 1 INCREMENT BY 1;
```

---

**8. 🗂️ Index (INDEX)** – Zrýchľuje vyhľadávanie v tabuľke.

```sql
CREATE INDEX idx_meno ON zamestnanci(meno);
```

---

**9. 🔐 Synonymum (SYNONYM)** – Alias na databázový objekt (napr. tabuľku).

```sql
CREATE SYNONYM zam FOR zamestnanci;
```

---

**10. 🧱 Typ (TYPE)** – Definuje vlastnú dátovú štruktúru.

```sql
CREATE OR REPLACE TYPE typ_adresa AS OBJECT (
  ulica VARCHAR2(50),
  mesto VARCHAR2(50),
  psc NUMBER
);
```

---

**11. 🗃️ Materializovaný pohľad (MATERIALIZED VIEW)** – Fyzicky uložený výsledok dopytu.

```sql
CREATE MATERIALIZED VIEW mzda_mv AS
SELECT id, meno, plat FROM zamestnanci;
```
